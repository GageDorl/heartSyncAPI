<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="module" src="/js/profile.js"></script>
    <link rel="stylesheet" href="/css/profile.css">
    <title>HeartSync - Profile</title>
</head>
<body>
    <div class="container">
        <h1 class="title">Your Profile</h1>
        <div class="loading">
            <div class="spinner"></div>
            <div class="loading-text">Loading<span class="loading-dots">.</span><span class="loading-dots">.</span><span class="loading-dots">.</span></div>
        </div>
        <div class="profile-info card hidden">
            <div class="profile-display">
                <h2 class="card-title">Profile Details</h2>
                <div id="user-info">
                    <img id="profile-icon" src="/images/profile-pic" alt="Profile Icon">
                    <p class="profile-item"><strong>Name:</strong> <span id="user-name"></span></p>
                    <p class="profile-item"><strong>Timezone:</strong> <span id="user-timezone"></span></p>
                    <p class="profile-item"><strong>Email:</strong> <span id="user-email"></span></p>
                    <p class="profile-item"><strong>User ID:</strong> <span id="user-id"></span></p>
                    <p class="profile-item"><strong>Base Hue:</strong> <span id="user-base-hue"></span></p>
                    <p class="profile-item"><strong>Base Lightness:</strong> <span id="user-base-lightness"></span></p>
                    <div class="color-sample"></div>
                    <div class="form-btns">
                        <button id="edit-profile-btn">Edit Profile</button>
                        <button id="logout" onclick="window.location.href='./logout'">Logout</button>
                    </div>
                </div>
            </div>
            <form id="edit-profile" class="hidden">
                <h2 class="card-title">Edit Profile</h2>
                <div id="edit-user-info">
                <label for="edit-name">Name:</label>
                    <input type="text" id="edit-name" name="edit-name" required>
                    
                    <label for="edit-timezone">Timezone:</label>
                    <select id="edit-timezone" name="edit-timezone" required>
                        <option value="EST">EST</option>
                        <option value="CST">CST</option>
                        <option value="MST">MST</option>
                        <option value="PST">PST</option>
                        <option value="GMT">GMT</option>
                        <option value="CET">CET</option>
                        <option value="IST">IST</option>
                        <option value="JST">JST</option>
                        <option value="AEST">AEST</option>
                        <option value="ACST">ACST</option>
                        <option value="AWST">AWST</option>
                        <option value="Other">Other</option>
                    </select>
                    <label for="edit-base-hue">Base Hue (0-360):</label>
                    <input type="range" id="edit-base-hue" name="edit-base-hue" min="0" max="360" required>
                    <label for="edit-base-lightness">Base Lightness (0-100):</label>
                    <input type="range" id="edit-base-lightness" name="edit-base-lightness" min="0" max="100" required>
                    <div class="color-sample"></div>
                    <div class="form-btns">
                        <button type="submit" class="save-profile-btn">Save Changes</button>
                        <button type="button" class="cancel-edit-btn">Cancel</button>
                    </div>
                </div>
            </form>
            <div class="relationship-info profile-display hidden">
                <h2 class="card-title">Relationship Details</h2>
                <p id="relationship-status-container" class="profile-item"><strong>Status:</strong> <span id="relationship-status"></span></p>
                <div id="partner-info" class="hidden">
                    <p class="profile-item"><strong>Partner Name:</strong> <span id="partner-name"></span></p>
                    <p class="profile-item"><strong>Partner Email:</strong> <span id="partner-email"></span></p>
                    <p class="profile-item" id="anniversary"><strong>Anniversary:</strong> <input type="date" id="anniversary-date"></p>
                    <div class="form-btns">
                        <button id="remove-relationship-btn">Remove Relationship</button>
                    </div>
                </div>
                <div id="no-relationship">
                    <form id="request-relationship-form" class="hidden">
                        <label for="partner-email-input">Partner's Email:</label>
                        <input type="email" id="partner-email-input" name="partner-email-input" required>
                        <button type="submit" class="request-relationship-btn">Send Request</button>
                    </form>
                    <div id="pending-request" class="hidden">
                        <p>Relationship request sent. Waiting for partner to accept.</p>
                    </div>
                    <div id="incoming-request" class="hidden">
                        <p>You have a relationship request from <span id="requester-email"></span>.</p>
                        <div class="form-btns">
                            <button id="accept-request-btn">Accept</button>
                            <button id="decline-request-btn">Decline</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>